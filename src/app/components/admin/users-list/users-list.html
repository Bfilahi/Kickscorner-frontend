<section class="min-h-screen py-32">
    <div class="max-w-7xl mx-auto px-4">
        <div class="mb-9">
            <h2 class="font-semibold text-lg">Users</h2>
            <p>Promote and delete users</p>
        </div>

        <div class="mx-auto">
            <div class="container overflow-x-scroll xl:overflow-x-visible mx-auto">
                <table class="border border-gray-300 dark:border-gray-500 w-7xl xl:w-full">
                    <thead class="border border-gray-300 dark:border-gray-500">
                        <tr>
                            <th class="w-[5%] text-left"></th>
                            <th class="w-[35%] text-left">Name</th>
                            <th class="w-[30%] text-left">Email</th>
                            <th class="w-[30%] text-left">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (user of users | 
                        paginate: { itemsPerPage: partialParams.size, currentPage: partialParams.page, totalItems: totalItems }; track $index) {
                            <tr class="border border-gray-300 dark:border-gray-500 even:bg-gray-50 dark:even:bg-gray-800">
                                <td class="py-1 px-4">{{ $index }}</td>
                                <td class="py-1">{{ user.fullName }}</td>
                                <td class="py-1">{{ user.email }}</td>
                                <td class="py-1 flex gap-4">
                                    @if ((currentUser$ | async)?.id !== user.id) {
                                        <button class="border border-red-400 text-red-400 text-sm text-center px-1 rounded-sm cursor-pointer w-fit h-full"
                                        (click)="delete(user.id)">
                                            Delete
                                        </button>
                                        <button class="border border-green-400 text-green-400 text-sm text-center px-1 rounded-sm cursor-pointer w-fit h-full"
                                        (click)="promoteToAdmin(user.id)">
                                            Upgrade to Admin
                                        </button>
                                        @if (isSuperAdmin) {
                                            <button class="border border-green-400 text-green-400 text-sm text-center px-1 rounded-sm cursor-pointer w-fit h-full"
                                            (click)="promoteToSuperAdmin(user.id)">
                                                Upgrade to Super
                                            </button>
                                        }
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="flex justify-center mt-7"
                [ngClass]="{'hidden': users.length <= 0}">
                    <pagination-controls class="pagination"
                    (pageChange)="onPageChange(partialParams.page = $event)">
                    </pagination-controls>
            </div>

            @if (users.length <= 0 && !isLoading) {
                <div class="mt-28">
                    <p class="text-red-400 text-center">LIST IS EMPTY.</p>
                </div>
            }
        </div>
    </div>
</section>
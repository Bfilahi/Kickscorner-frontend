<section class="min-h-screen py-32">
    <div class="max-w-7xl mx-auto px-4">
        <div class="mb-9">
            <h2 class="font-semibold text-lg">Product</h2>
            <p>Add and delete products</p>
        </div>

        <div class="mx-auto">
            <div class="mb-7">
                <a routerLink="/admin/new-product" class="bg-yellow-500 font-bold dark:text-black px-4 py-2 rounded-sm w-fit">
                    Add product
                </a>
            </div>

            <div class="container overflow-x-scroll xl:overflow-x-visible mx-auto">
                <table class="border border-gray-300 dark:border-gray-500 w-7xl xl:w-full">
                    <thead class="border border-gray-300 dark:border-gray-500">
                        <tr>
                            <th></th>
                            @for (th of tableHeaders; track $index) {
                                <th class="text-left">{{ th }}</th>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @for (product of products | 
                        paginate: { itemsPerPage: partialParams.size, currentPage: partialParams.page, totalItems: totalItems }; track $index) {
                            <tr class="border border-gray-300 dark:border-gray-500 even:bg-gray-50 dark:even:bg-gray-800">
                                <td class="py-1.5 px-4">{{ $index }}</td>
                                <td class="py-1.5">{{ product.name }}</td>
                                <td class="py-1.5">{{ product.brand.name }}</td>
                                <td class="py-1.5 flex flex-wrap gap-1.5">
                                    @for (color of product.colors; track $index) {
                                        <div class="rounded-full w-7 h-7 border border-gray-300 dark:border-gray-500" 
                                        [style]="{'background-color': color.name}"></div>
                                    }
                                </td>
                                <td class="py-1.5">{{ product.price | currency: 'EUR' }}</td>
                                <td class="py-1.5 w-40">{{ product.unitsInStock }}</td>
                                <td class="py-1.5 flex items-center gap-2">
                                    <div class="w-16 flex items-center gap-2">
                                        <img src="{{ product.images[0].imgUrl }}" alt="">
                                    </div>
                                    <div class="w-16 flex items-center gap-2">
                                        <img src="{{ product.images[1].imgUrl }}" alt="">
                                    </div>
                                    <div class="w-16 flex items-center gap-2">
                                        <img src="{{ product.images[2].imgUrl }}" alt="">
                                    </div>
                                    <div class="w-16 flex items-center gap-2">
                                        <img src="{{ product.images[3].imgUrl }}" alt="">
                                    </div>
                                </td>
                                <td class="py-1.5 px-1.5 w-20">
                                    <button class="border border-red-400 text-red-400 text-sm py-0.5 px-1 mb-1.5 rounded-sm cursor-pointer w-full"
                                    (click)="delete(product.id)">
                                        Delete
                                    </button>
                                    <a routerLink="/admin/edit-product/{{product.id}}"
                                    class="block border border-green-400 text-green-400 text-center text-sm py-0.5 px-1 rounded-sm w-full">
                                        Edit
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="flex justify-center mt-7"
                [ngClass]="{'hidden': products.length <= 0}">
                    <pagination-controls class="pagination"
                    (pageChange)="onPageChange(partialParams.page = $event)">
                    </pagination-controls>
            </div>

            @if (products.length <= 0 && !isLoading) {
                <div class="mt-28">
                    <p class="text-red-400 text-center">LIST IS EMPTY.</p>
                </div>
            }
        </div>
    </div>
</section>